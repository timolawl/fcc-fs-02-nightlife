!function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a="function"==typeof require&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error("Cannot find module '"+o+"'");throw f.code="MODULE_NOT_FOUND",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}for(var i="function"==typeof require&&require,o=0;o<r.length;o++)s(r[o]);return s}({1:[function(require,module,exports){"use strict";function conductSearch(searchValue){if(document.querySelector(".masonry-element")){var bars=document.querySelector(".bar-list");for(bars.style="position: relative; height: 0",document.querySelector("footer").classList.add("footer--unsearched");bars.firstChild;)bars.removeChild(bars.firstChild)}socket.emit("bar search",{location:searchValue}),sessionStorage.setItem("searchLocation",searchValue),console.log("session storage set: "+sessionStorage.getItem("searchLocation")),document.querySelector(".bar-list").classList.remove("visibility--hide")}function toggleView(inputLength,logoutAction,logStatus){(inputLength&&!document.querySelector(".mainbox").classList.contains("mainbox--top")||logoutAction)&&(document.querySelector(".mainbox").classList.toggle("mainbox--top"),document.querySelector(".mainbox__search").classList.toggle("mainbox__search--top"),document.querySelector(".mainbox__title-row").classList.toggle("display--hide"),document.querySelector(".mainbox__title-row--top").classList.toggle("display--hide"),document.querySelector(".mainbox__subtitle-row").classList.toggle("display--hide"),document.querySelector(".mainbox__log-row").classList.toggle("display--hide"),document.querySelector(".mainbox__log-row--top").classList.toggle("display--hide"),"Log Out"===logStatus&&document.querySelector(".mainbox__login-details--top").classList.toggle("display--hide"))}function createListing(business,listing){console.log("making listings..");var widthContainer=document.createElement("div");widthContainer.className="masonry-element",listing.appendChild(widthContainer);var card=document.createElement("div");card.className="card",widthContainer.appendChild(card);var cardSection=document.createElement("div");cardSection.className="card-section text-center",card.appendChild(cardSection);var img=document.createElement("img");img.className="img-fluid img-thumbnail mx-auto d-block",img.src=business.image_url,cardSection.appendChild(img);var barTitle=document.createElement("h6"),barLink=document.createElement("a");barLink.className="bar__title",barLink.href=business.url,barLink.textContent=business.name,barTitle.appendChild(barLink),cardSection.appendChild(barTitle);var barReview=document.createElement("p");barReview.className="card-text text-justify",barReview.textContent=business.excerpt,cardSection.appendChild(barReview);var goingButton=document.createElement("button");goingButton.className="button secondary",goingButton.setAttribute("type","button"),cardSection.appendChild(goingButton);var goingCount=document.createElement("span");goingCount.className="badge secondary",goingCount.textContent="0",goingButton.appendChild(goingCount);var goingText=document.createElement("span");goingText.className="bar__going--text",goingText.textContent="Going",goingButton.appendChild(goingText)}var socket=io();window.onload=function(){var searchInput,logStatus=document.querySelector(".mainbox__log-button").textContent;document.querySelector(".bn-logo--link").addEventListener("click",function(e){sessionStorage.removeItem("searchLocation"),location.href="/"});searchInput=sessionStorage.getItem("searchLocation")?sessionStorage.getItem("searchLocation"):"",console.log("document.referrer: "+document.referrer),console.log("search input: "+searchInput),searchInput&&(document.querySelector(".mainbox__search--input").value=searchInput,toggleView(searchInput.length,!1,logStatus),conductSearch(searchInput)),Array.prototype.forEach.call(document.querySelectorAll(".mainbox__log-button"),function(el){return el.addEventListener("click",function(){"Log In"===logStatus?(document.querySelector(".overlay").classList.remove("visibility--hide"),document.querySelector(".modal").classList.remove("display--hide")):"Log Out"===logStatus&&(sessionStorage.removeItem("searchLocation"),document.querySelector(".mainbox__search--input").value="",document.querySelector(".bar-list").classList.add("visibility--hide"),document.querySelector("footer").classList.add("footer--unsearched"),document.querySelector(".mainbox").classList.contains("mainbox--top")&&toggleView(0,!0,logStatus),location.href="/logout")})}),document.querySelector(".mainbox__search").addEventListener("click",function(e){searchInput=document.querySelector(".mainbox__search--input").value,e.target.classList.contains("mainbox__search--submit")&&searchInput&&conductSearch(searchInput)}),document.querySelector(".mainbox__search").addEventListener("keyup",function(e){searchInput=document.querySelector(".mainbox__search--input").value;var key=e.which||e.keyCode;13===key&&searchInput&&conductSearch(searchInput)}),document.querySelector(".mainbox__search--input").addEventListener("input",function(e){console.log(e.target.value),console.log(e.target.length),toggleView(e.target.value.length,!1,logStatus)}),document.querySelector(".social-login__close").addEventListener("click",function(){document.querySelector(".overlay").classList.add("visibility--hide"),document.querySelector(".modal").classList.add("display--hide")}),document.querySelector(".overlay").addEventListener("click",function(){document.querySelector(".overlay").classList.add("visibility--hide"),document.querySelector(".modal").classList.add("display--hide")})},socket.on("bar results",function(data){console.log("socket emission received...");var yelpReviews=data.reviews,listings=document.createDocumentFragment();listings.className="visibility--hide";var masonrySizer=document.createElement("div");masonrySizer.className="masonry-element--sizer",listings.appendChild(masonrySizer);for(var listingNumber=0;listingNumber<yelpReviews.length;listingNumber++)createListing(yelpReviews[listingNumber],listings);var images=listings.querySelectorAll(".img-fluid");imagesLoaded(images,function(){document.querySelector(".bar-list").appendChild(listings);new Masonry(document.querySelector(".bar-list"),{itemSelector:".masonry-element",columnWidth:".masonry-element--sizer",percentPosition:!0});document.querySelector("footer").classList.remove("footer--unsearched")})})},{}]},{},[1]);
//# sourceMappingURL=post.bundle.js.map
